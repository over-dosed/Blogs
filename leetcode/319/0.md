# 319 灯泡问题

![20220121181724](https://picture-1308922338.cos.ap-guangzhou.myqcloud.com/note/20220121181724.png)

## 思路：变相求因数的数量

e.g. :

1 的因数 只有 1 个，就是 1 ，故只开关一次

2 的因数 只有 2 个，就是 1，2 ，故只开关两次

3 的因数 只有 2 个，就是 1，3 ，故只开关两次

4 的因数 只有 3 个，就是 1，4，2 ，故只开关三次

5 是 1，5， 两次

6 是 1，6，2，3  ： 4次

而要求第n个时剩余的灯，只需要将每个灯的状态求出，累加即可

每个灯的状态由 **它的因数的数量** 决定

=》 继续推得，当 判断的数刚好是**平方数**时，像4,9,16这种，会有**奇数**个因数数量，即开灯

而不是平方数时，一定是**偶数**因数数量，即关灯

*所以只需要求平方数即可*

=》判断一个数是否为平方数

### 二分法查找

1. 首先将 1 和 n-1 分别设置为左值和右值

2. 取中间值 (1 + n-1) / 2 = middle

3. 计算middle的平方，若大于n , 则右值为middle；反之左值为middle

4. 若middle平方 == n ,则成立

5. 若 right-1 <= left , 不成立

### 最后发现

最后发现，一个数内所含平方数的多少 = 这个数开平方取整

25 内有 25 16 9 4 1，共5个，且25开平方为5，以此类推

## 代码

~~~C
#include<math.h> 
class Solution {
public:
    int bulbSwitch(int n) 
    {
        return (int)sqrt(n);
    }
};
~~~
